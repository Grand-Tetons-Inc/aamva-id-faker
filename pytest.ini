[pytest]
# Pytest Configuration for AAMVA ID Faker
# TDD-focused test suite with comprehensive coverage

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test paths
testpaths = tests

# Minimum Python version
minversion = 7.0

# Output options
addopts =
    # Verbose output
    -v
    # Show extra test summary info
    --tb=short
    # Show local variables in tracebacks
    --showlocals
    # Strict markers (fail on unknown markers)
    --strict-markers
    # Strict config (fail on unknown config)
    --strict-config
    # Coverage options (run with --cov flag)
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-report=json:coverage.json
    # Show slowest 10 tests
    --durations=10
    # Fail on first error (useful for TDD)
    # -x
    # Color output
    --color=yes
    # Show warnings
    -W default

# Markers for test categorization
markers =
    unit: Unit tests (fast, isolated)
    integration: Integration tests (multiple components)
    e2e: End-to-end workflow tests
    gui: GUI component tests
    visual: Visual regression tests
    accessibility: Accessibility/WCAG compliance tests
    performance: Performance and benchmark tests
    contract: AAMVA specification contract tests
    security: Security and fuzzing tests
    property: Property-based tests with Hypothesis
    slow: Tests that take more than 1 second
    flaky: Tests that occasionally fail (need investigation)
    quarantine: Unstable tests (excluded from CI)
    smoke: Quick smoke tests for basic functionality
    mutation: Mutation testing related tests

# Coverage configuration
# (also see .coveragerc for detailed settings)

# Timeout for tests (prevent hanging)
timeout = 300
timeout_method = thread

# Parallel execution options
# Run with: pytest -n auto
# (requires pytest-xdist)

# Logging
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

log_file = tests/test_output.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] %(name)s - %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

# Ignore warnings from dependencies
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    # Add specific warnings to ignore here

# Test collection options
norecursedirs =
    .git
    .tox
    dist
    build
    *.egg
    __pycache__
    .venv
    venv
    output
    htmlcov

# Console output
console_output_style = progress

# Hypothesis settings (property-based testing)
# See tests for @settings decorators with specific profiles
